# 云函数模式配置示例（简化版）
system:
  name: "data-collector-serverless"
  version: "2.0.0"
  environment: "production"
  timezone: "UTC"

# 运行时配置
runtime:
  mode: "serverless"
  serverless:
    provider: "tencent"
    enable_local_timer: true
    # 节点标识
    node_id: "${SCF_FUNCTION_NAME}-${SCF_INSTANCE_ID}"
    # Moox服务地址（心跳上报）
    moox_url: "${MOOX_SERVICE_URL}"
    # 缓存服务端点（获取任务配置）
    cache_endpoint: "${CACHE_SERVICE_URL}"
    # 心跳RPC配置
    heartbeat_rpc:
      target: "trpc.moox.server.CloudNodeAPI"
      namespace: "Production"
      timeout: 10
    # 不再需要本地任务存储
    task_store:
      type: "none"

# 日志配置
logging:
  level: "info"
  format: "json"
  output:
    - type: "console"
      level: "info"

# 事件总线配置
event_bus:
  type: "memory"
  buffer_size: 1000
  workers: 5

# 存储配置
storage:
  default: "s3"
  backends:
    s3:
      bucket: "data-collector-storage"
      region: "ap-guangzhou"
      prefix: "serverless/"

# 数据源配置（初始化App用）
sources:
  market:
    - name: "binance"
      enabled: true
      config: "configs/sources/market/binance.yaml"